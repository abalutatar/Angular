<div class="comments-section mt-4">
  <h6 class="border-bottom pb-2">Komentarze ({{ comments.length }})</h6>

  <div *ngFor="let comment of displayComments" class="mb-2 p-3 border rounded bg-light d-flex justify-content-between align-items-start">
    <div>
      <div class="mb-1">
        <strong class="text-primary">{{ comment.name }}</strong>
        <small class="text-muted ms-2">{{ comment.date | date:'short' }}</small>
      </div>
      <p class="mb-0 text-dark">{{ comment.text }}</p>
    </div>

    <button *ngIf="currentUserEmail === comment.email"
            (click)="deleteComment(comment._id)"
            class="btn btn-outline-danger btn-sm border-0"
            title="Usuń komentarz">
      &times;
    </button>
  </div>

  <form (ngSubmit)="addComment()" class="mt-3 shadow-sm p-3 bg-white rounded border">
    <div class="mb-2">
      <textarea class="form-control"
                placeholder="Napisz co myślisz..."
                [(ngModel)]="newText"
                name="text"
                rows="2"
                required>
      </textarea>
    </div>
    <div class="d-flex justify-content-between align-items-center">
      <small class="text-muted">Komentujesz jako: <strong>{{ currentUserName }}</strong></small>
      <button type="submit" class="btn btn-primary btn-sm" [disabled]="!newText.trim()">
        Dodaj komentarz
      </button>
    </div>
  </form>
</div>
